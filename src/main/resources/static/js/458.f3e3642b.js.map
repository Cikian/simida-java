{"version":3,"file":"js/458.f3e3642b.js","mappings":"iKAGO,MAAMA,GAAiBC,EAAAA,EAAAA,IAAY,YAAa,CACnDC,MAAOA,KACK,CACJC,IAAK,KAGbC,QAAS,CAAC,EACVC,QAAS,CAAC,G,qVC2Bd,MAAMC,GAAaC,EAAAA,EAAAA,IAAI,CAAEC,IAAK,KACxBC,GAASF,EAAAA,EAAAA,IAAI,IACbG,GAASC,EAAAA,EAAAA,MAETC,GAAMZ,EAAAA,EAAAA,KAENa,GAAWN,EAAAA,EAAAA,KAAI,GAEfO,GAAMC,EAAAA,EAAAA,IAAoB,OAE1BC,GAAYT,EAAAA,EAAAA,IAAI,CAAEC,IAAK,MAE7BS,EAAAA,EAAAA,KAAU,KACRC,GAAgB,IAGlB,MAAMA,EAAiBA,KACrBC,EAAAA,EAAeC,IAAI,gBAAkBN,GAAKO,MAAKC,IACvB,OAAlBA,EAAIC,KAAKC,OACXlB,EAAWmB,MAAMjB,IAAMc,EAAIC,KAAKA,KAClC,GACA,EAGEG,EAAaC,IACjBlB,EAAOgB,MAAQE,EAAEA,EAEjBX,EAAUS,MAAMjB,IAAIoB,OAAOZ,EAAUS,MAAMjB,IAAIqB,QAAQF,GAAI,GAC3DjB,EAAOoB,KAAK,CAACC,KAAM,WAAYC,MAAO,CAAClB,IAAKa,EAAEA,IAAI,E,OAGpDf,EAAIqB,YAAW,CAACC,EAAWhC,KACzB,IAAIC,EAAMgC,KAAKC,MAAMlC,EAAMC,KAC3B,GAAiB,IAAbA,EAAIkC,KAAY,CAClB,MAAMC,EAAOnC,EAAImC,KACZtB,EAAUS,MAAMjB,IAAI+B,SAASD,IAChCtB,EAAUS,MAAMjB,IAAIsB,KAAKQ,EAG7B,K,q1BCtEF,MAAME,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://simida-web/./src/store/websocket.js","webpack://simida-web/./src/views/chatModel/user/userList.vue","webpack://simida-web/./src/views/chatModel/user/userList.vue?daf0"],"sourcesContent":["import {defineStore} from \"pinia\";\n\n\nexport const websocketStore = defineStore(\"websocket\", {\n    state: () => {\n        return ({\n            msg: '',\n        })\n    },\n    getters: {},\n    actions: {}\n})\n","<template>\n\n  <div class=\"userlist\">\n\n    <div class=\"userlist-left\">\n      <el-scrollbar v-if=\"friendList.arr.length!==0\">\n        <div class=\"left-list\" v-for=\"(item,index) in friendList.arr\" :key=\"index\"\n             :class=\"{'left-list-bg' : active === item.userId}\"\n             @click=\"startCall({e : item.userId})\"\n             style=\"cursor: pointer\">\n          <div class=\"new-msg\" v-if=\"newMsgArr.arr.includes(item.userId)\">新消息</div>\n          <img :src=\"item.avatar\" class=\"left-list-img\" alt=\"0\">\n<!--          <span class=\"left-list-title\">{{ item.nickName }}</span>-->\n          <a-typography-paragraph class=\"left-list-title rec-para\" :style=\"ellipsis ? {width:'100px'}:{}\"\n                                  :content=\"item.nickName\"/>\n        </div>\n      </el-scrollbar>\n      <div class=\"left-list\" v-else>\n        好友列表为空\n      </div>\n    </div>\n\n    <div class=\"userlist-right\">\n      <router-view></router-view>\n    </div>\n  </div>\n\n\n</template>\n\n<script lang=\"js\" setup>\nimport {onMounted, ref} from 'vue';\nimport {useRouter} from 'vue-router';\nimport requestService from \"@/utils/request\";\nimport {websocketStore} from \"@/store/websocket\";\nimport {getLocalStorageItem} from \"@/utils/data\";\n\nconst friendList = ref({ arr: [] });\nconst active = ref('');\nconst router = useRouter();\n\nconst web = websocketStore();\n\nconst ellipsis = ref(true);\n\nconst uid = getLocalStorageItem(\"uid\");\n\nconst newMsgArr = ref({ arr: [] });\n\nonMounted(() => {\n  getFriendsList();\n});\n\nconst getFriendsList = () => {\n  requestService.get('/friend/list/' + uid).then(res => {\n    if (res.data.code === 2001) {\n      friendList.value.arr = res.data.data;\n    }\n  });\n};\n\nconst startCall = (e) => {\n  active.value = e.e;\n  // 从newMsgArr中删除\n  newMsgArr.value.arr.splice(newMsgArr.value.arr.indexOf(e), 1);\n  router.push({path: 'chatWith', query: {uid: e.e}});\n};\n\nweb.$subscribe((mutations, state) => {\n  let msg = JSON.parse(state.msg);\n  if (msg.type === 2) {\n    const from = msg.from;\n    if (!newMsgArr.value.arr.includes(from)) {\n      newMsgArr.value.arr.push(from);\n    } else {\n    }\n  }\n});\n\n\n\n</script>\n\n<style scoped>\n.userlist {\n  //padding-bottom: 20px;\n  //padding-top: 20px;\n  display: flex;\n  height: 100%;\n  width: 100%;\n}\n\n.userlist-left {\n\n  //padding-left: 10px;\n  flex: 1;\n  border-right: #dbd6d6 1px solid;\n}\n\n.userlist-right {\n  flex: 4;\n  /* 背景图片，半透明 */\n  background-image: url(https://img-upyun.cikian.cn/develop/simida/static/chatbg.png);\n  background-repeat: no-repeat;\n  background-size: 60%;\n  background-position: center;\n\n\n\n\n}\n\n\n.left-list {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  grid-template-rows:repeat(2, 1fr);\n  grid-template-areas: 'a b'\n                       'a b';\n  justify-items: center;\n  align-items: center;\n  padding: 10px 0;\n  position: relative;\n}\n\n.left-list-bg {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  grid-template-rows:repeat(2, 1fr);\n  grid-template-areas: 'a b'\n    'a b';\n  justify-items: center;\n  align-items: center;\n\n  background-color: #eaeaea;\n}\n\n.left-list-img {\n  width: 50px;\n  height: 50px;\n  border-radius: 999px;\n  grid-area: a\n}\n\n.left-list-title {\n  grid-area: b\n}\n\n.new-msg {\n  position: absolute;\n  top: 0;\n  left: 30px;\n  width: 30px;\n  height: 20px;\n  border-radius: 5px;\n  background-color: red;\n  color: white;\n  font-size: 10px;\n  text-align: center;\n  line-height: 20px;\n  animation: blink 1s linear infinite;\n}\n\n@keyframes blink {\n  0% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n.rec-para {\n  cursor: pointer;\n  font-size: 13px;\n  margin-top: 15px;\n}\n\n</style>\n","import script from \"./userList.vue?vue&type=script&lang=js&setup=true\"\nexport * from \"./userList.vue?vue&type=script&lang=js&setup=true\"\n\nimport \"./userList.vue?vue&type=style&index=0&id=1880b6b4&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1880b6b4\"]])\n\nexport default __exports__"],"names":["websocketStore","defineStore","state","msg","getters","actions","friendList","ref","arr","active","router","useRouter","web","ellipsis","uid","getLocalStorageItem","newMsgArr","onMounted","getFriendsList","requestService","get","then","res","data","code","value","startCall","e","splice","indexOf","push","path","query","$subscribe","mutations","JSON","parse","type","from","includes","__exports__"],"sourceRoot":""}