"use strict";(self["webpackChunksimida_web"]=self["webpackChunksimida_web"]||[]).push([[54],{6394:function(e,t,a){a.d(t,{Z:function(){return u}});var n=a(3396),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M573 421c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40zm-280 0c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40z"}},{tag:"path",attrs:{d:"M894 345a343.92 343.92 0 00-189-130v.1c-17.1-19-36.4-36.5-58-52.1-163.7-119-393.5-82.7-513 81-96.3 133-92.2 311.9 6 439l.8 132.6c0 3.2.5 6.4 1.5 9.4a31.95 31.95 0 0040.1 20.9L309 806c33.5 11.9 68.1 18.7 102.5 20.6l-.5.4c89.1 64.9 205.9 84.4 313 49l127.1 41.4c3.2 1 6.5 1.6 9.9 1.6 17.7 0 32-14.3 32-32V753c88.1-119.6 90.4-284.9 1-408zM323 735l-12-5-99 31-1-104-8-9c-84.6-103.2-90.2-251.9-11-361 96.4-132.2 281.2-161.4 413-66 132.2 96.1 161.5 280.6 66 412-80.1 109.9-223.5 150.5-348 102zm505-17l-8 10 1 104-98-33-12 5c-56 20.8-115.7 22.5-171 7l-.2-.1A367.31 367.31 0 00729 676c76.4-105.3 88.8-237.6 44.4-350.4l.6.4c23 16.5 44.1 37.1 62 62 72.6 99.6 68.5 235.2-8 330z"}},{tag:"path",attrs:{d:"M433 421c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40z"}}]},name:"comment",theme:"outlined"},c=r,l=a(8144);function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){o(e,t,a[t])}))}return e}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var i=function(e,t){var a=s({},e,t.attrs);return(0,n.Wm)(l.Z,s({},a,{icon:c}),null)};i.displayName="CommentOutlined",i.inheritAttrs=!1;var u=i},9069:function(e,t,a){a.d(t,{Z:function(){return u}});var n=a(3396),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.9 533.7c16.8-22.2 26.1-49.4 26.1-77.7 0-44.9-25.1-87.4-65.5-111.1a67.67 67.67 0 00-34.3-9.3H572.4l6-122.9c1.4-29.7-9.1-57.9-29.5-79.4A106.62 106.62 0 00471 99.9c-52 0-98 35-111.8 85.1l-85.9 311H144c-17.7 0-32 14.3-32 32v364c0 17.7 14.3 32 32 32h601.3c9.2 0 18.2-1.8 26.5-5.4 47.6-20.3 78.3-66.8 78.3-118.4 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7-.2-12.6-2-25.1-5.6-37.1zM184 852V568h81v284h-81zm636.4-353l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 16.5-7.2 32.2-19.6 43l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 16.5-7.2 32.2-19.6 43l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 22.4-13.2 42.6-33.6 51.8H329V564.8l99.5-360.5a44.1 44.1 0 0142.2-32.3c7.6 0 15.1 2.2 21.1 6.7 9.9 7.4 15.2 18.6 14.6 30.5l-9.6 198.4h314.4C829 418.5 840 436.9 840 456c0 16.5-7.2 32.1-19.6 43z"}}]},name:"like",theme:"outlined"},c=r,l=a(8144);function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){o(e,t,a[t])}))}return e}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var i=function(e,t){var a=s({},e,t.attrs);return(0,n.Wm)(l.Z,s({},a,{icon:c}),null)};i.displayName="LikeOutlined",i.inheritAttrs=!1;var u=i},7217:function(e,t,a){a.d(t,{Z:function(){return u}});var n=a(3396),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 161H699.2c-49.1 0-97.1 14.1-138.4 40.7L512 233l-48.8-31.3A255.2 255.2 0 00324.8 161H96c-17.7 0-32 14.3-32 32v568c0 17.7 14.3 32 32 32h228.8c49.1 0 97.1 14.1 138.4 40.7l44.4 28.6c1.3.8 2.8 1.3 4.3 1.3s3-.4 4.3-1.3l44.4-28.6C602 807.1 650.1 793 699.2 793H928c17.7 0 32-14.3 32-32V193c0-17.7-14.3-32-32-32zM324.8 721H136V233h188.8c35.4 0 69.8 10.1 99.5 29.2l48.8 31.3 6.9 4.5v462c-47.6-25.6-100.8-39-155.2-39zm563.2 0H699.2c-54.4 0-107.6 13.4-155.2 39V298l6.9-4.5 48.8-31.3c29.7-19.1 64.1-29.2 99.5-29.2H888v488zM396.9 361H211.1c-3.9 0-7.1 3.4-7.1 7.5v45c0 4.1 3.2 7.5 7.1 7.5h185.7c3.9 0 7.1-3.4 7.1-7.5v-45c.1-4.1-3.1-7.5-7-7.5zm223.1 7.5v45c0 4.1 3.2 7.5 7.1 7.5h185.7c3.9 0 7.1-3.4 7.1-7.5v-45c0-4.1-3.2-7.5-7.1-7.5H627.1c-3.9 0-7.1 3.4-7.1 7.5zM396.9 501H211.1c-3.9 0-7.1 3.4-7.1 7.5v45c0 4.1 3.2 7.5 7.1 7.5h185.7c3.9 0 7.1-3.4 7.1-7.5v-45c.1-4.1-3.1-7.5-7-7.5zm416 0H627.1c-3.9 0-7.1 3.4-7.1 7.5v45c0 4.1 3.2 7.5 7.1 7.5h185.7c3.9 0 7.1-3.4 7.1-7.5v-45c.1-4.1-3.1-7.5-7-7.5z"}}]},name:"read",theme:"outlined"},c=r,l=a(8144);function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){o(e,t,a[t])}))}return e}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var i=function(e,t){var a=s({},e,t.attrs);return(0,n.Wm)(l.Z,s({},a,{icon:c}),null)};i.displayName="ReadOutlined",i.inheritAttrs=!1;var u=i},7439:function(e,t,a){a.d(t,{Z:function(){return u}});var n=a(3396),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M752 664c-28.5 0-54.8 10-75.4 26.7L469.4 540.8a160.68 160.68 0 000-57.6l207.2-149.9C697.2 350 723.5 360 752 360c66.2 0 120-53.8 120-120s-53.8-120-120-120-120 53.8-120 120c0 11.6 1.6 22.7 4.7 33.3L439.9 415.8C410.7 377.1 364.3 352 312 352c-88.4 0-160 71.6-160 160s71.6 160 160 160c52.3 0 98.7-25.1 127.9-63.8l196.8 142.5c-3.1 10.6-4.7 21.8-4.7 33.3 0 66.2 53.8 120 120 120s120-53.8 120-120-53.8-120-120-120zm0-476c28.7 0 52 23.3 52 52s-23.3 52-52 52-52-23.3-52-52 23.3-52 52-52zM312 600c-48.5 0-88-39.5-88-88s39.5-88 88-88 88 39.5 88 88-39.5 88-88 88zm440 236c-28.7 0-52-23.3-52-52s23.3-52 52-52 52 23.3 52 52-23.3 52-52 52z"}}]},name:"share-alt",theme:"outlined"},c=r,l=a(8144);function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){o(e,t,a[t])}))}return e}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var i=function(e,t){var a=s({},e,t.attrs);return(0,n.Wm)(l.Z,s({},a,{icon:c}),null)};i.displayName="ShareAltOutlined",i.inheritAttrs=!1;var u=i},604:function(e,t,a){a.r(t),a.d(t,{default:function(){return C}});a(560);var n=a(3396),r=a(4870),c=a(7139),l=a(7178),s=a(7625),o=a(7217),i=a(7439),u=a(6394),d=a(9069),f=a(4471),p=a(5878),m=a(1120),g=a(4476);const v=e=>((0,n.dD)("data-v-0983a7c6"),e=e(),(0,n.Cn)(),e),h={class:"user-display"},w={class:"user-background"},y={class:"nickname"},b={class:"msg"},k=v((()=>(0,n._)("span",null,"粉丝  ",-1))),z=v((()=>(0,n._)("span",null,"关注  ",-1))),O={class:"desc"},I={class:"desc-text"},_={style:{marginTop:"20px",letterSpacing:"1px"}},j={class:"post-nickname"},U={class:"post-createtime"},H={class:"post-content"},S=v((()=>(0,n._)("span",{style:{color:"#de1c31"}},"展开",-1)));var P={__name:"userCenter",setup(e){const t=(0,r.iH)(""),a=((0,r.iH)(""),(0,r.iH)(!0),function(e){return t.value=(0,p.le)("token"),"image/jpeg"!==e.type&&"image/png"!==e.type?(l.z8.error("背景只允许JPG或PNG格式!"),!1):!(e.size/1024/1024>10)||(l.z8.error("上传的背景图片文件大小不能超过10MB!"),!1)}),v=async function(e,t){1001===e.code?((0,l.z8)({type:"success",message:"上传成功"}),s.h.userInfo.bgImageUrl=e.data.filePath,f.Z.post("/user/changeBg",e.data.filePath).then((e=>{4001===e.data.code&&(localStorage.removeItem("token"),(0,p.D$)("token",e.data.data,5),f.Z.get("/user/").then((e=>{2001===e.data.code&&(localStorage.removeItem("userInfo"),(0,p.D$)("userInfo",e.data.data,5),s.h.userInfo=e.data.data.userInfo,s.h.followers=e.data.data.followers,s.h.followings=e.data.data.followings,s.h.isLogin=!0)})),(0,l.z8)({type:"success",message:"背景修改成功"}))}))):(0,l.z8)({type:"warning",message:e.msg})},P=(0,r.iH)();function Z(){return new Promise(((e,t)=>{P.value.submit(),e()}))}const W=(0,r.iH)(0),C=(0,r.iH)(0),x=()=>{W.value=s.h.followers.length,C.value=s.h.followings.length};(0,n.bv)((()=>{x(),A()}));const M=(0,r.iH)(!0),A=((0,r.iH)("#000"),()=>{f.Z.get("/feed/getFeedByUserId/"+s.h.userInfo.userId).then((e=>{2001===e.data.code&&(N.value=e.data.data)}))}),D=e=>{m.Z.push({path:"/postDetail",query:{feedId:e}})},N=((0,r.iH)({userName:"",userId:"",nickName:"",avatar:""}),(0,r.iH)([])),B=((0,r.iH)(!0),e=>{f.Z.post("/like",{feedId:e.feedId,feedUserId:e.userId},{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((t=>{3001===t.data.code?(T("success",t.data.msg),e.likedUserIds.push(s.h.userInfo.userId)):T("error",t.data.msg)}))}),L=e=>{f.Z.delete("/like",{headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{feedId:e.feedId,feedUserId:e.userId}}).then((t=>{5001===t.data.code?(T("success",t.data.msg),e.likedUserIds.splice(e.likedUserIds.indexOf(s.h.userInfo.userId),1)):T("error",t.data.msg)}))},T=(e,t,a)=>{g.Z[e]({message:t,description:a,duration:2})};return(e,l)=>{const f=(0,n.up)("el-image"),p=(0,n.up)("a-avatar"),m=(0,n.up)("a-button"),g=(0,n.up)("el-upload"),x=(0,n.up)("a-typography-text"),A=(0,n.up)("a-card-meta"),T=(0,n.up)("a-typography-paragraph"),V=(0,n.up)("a-image"),E=(0,n.up)("a-card");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",h,[(0,n._)("div",w,[(0,n.Wm)(f,{class:"bg-image",src:(0,r.SU)(s.h).userInfo.bgImageUrl,fit:"cover"},null,8,["src"])]),(0,n.Wm)(p,{style:{marginTop:"-30px",marginLeft:"20px"},src:(0,r.SU)(s.h).userInfo.avatar,size:100},null,8,["src"]),(0,n._)("div",y,(0,c.zw)((0,r.SU)(s.h).userInfo.nickName),1),(0,n._)("div",b,[(0,n._)("div",null,[k,(0,n.Uk)((0,c.zw)(W.value),1)]),(0,n._)("div",null,[z,(0,n.Uk)((0,c.zw)(C.value),1)])]),(0,n._)("div",null,[(0,n.Wm)(g,{class:"background-uploader",ref_key:"uploadRef",ref:P,"show-upload-list":!1,action:"/upload",data:{operationCode:3},headers:{Authorization:t.value},"show-file-list":!1,"before-upload":a,"on-success":v},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{class:"upload-btn",type:"primary",shape:"round",onClick:Z},{default:(0,n.w5)((()=>[(0,n.Uk)("更换背景")])),_:1})])),_:1},8,["headers"])]),(0,n._)("div",O,[(0,n.Wm)((0,r.SU)(o.Z),{class:"desc-icon"}),(0,n.Wm)(x,null,{default:(0,n.w5)((()=>[(0,n._)("div",I,(0,c.zw)((0,r.SU)(s.h).userInfo.description),1)])),_:1})])]),(0,n._)("div",_," 全部动态("+(0,c.zw)(N.value.length)+") ",1),(0,n._)("div",{style:(0,c.j5)([{marginTop:"20px"},{"white-space":"pre-wrap"}])},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(N.value,((e,t)=>((0,n.wg)(),(0,n.j4)(E,{key:t,class:"post",size:"default"},{actions:(0,n.w5)((()=>[(0,n.Wm)(m,null,{icon:(0,n.w5)((()=>[(0,n.Wm)((0,r.SU)(i.Z),{key:"forward"})])),_:1}),(0,n.Wm)(m,{onClick:t=>D(e.feedId)},{icon:(0,n.w5)((()=>[(0,n.Wm)((0,r.SU)(u.Z),{key:"comment"})])),default:(0,n.w5)((()=>[(0,n.Uk)(" "+(0,c.zw)(e.comments.length),1)])),_:2},1032,["onClick"]),e.likedUserIds.includes((0,r.SU)(s.h).userInfo.userId)?((0,n.wg)(),(0,n.j4)(m,{key:0,onClick:t=>L(e)},{icon:(0,n.w5)((()=>[(0,n.Wm)((0,r.SU)(d.Z),{style:{color:"#de1c31"},key:"like"})])),default:(0,n.w5)((()=>[(0,n.Uk)(" "+(0,c.zw)(e.likedUserIds.length),1)])),_:2},1032,["onClick"])):((0,n.wg)(),(0,n.j4)(m,{key:1,onClick:t=>B(e)},{icon:(0,n.w5)((()=>[(0,n.Wm)((0,r.SU)(d.Z),{key:"like"})])),default:(0,n.w5)((()=>[(0,n.Uk)(" "+(0,c.zw)(e.likedUserIds.length),1)])),_:2},1032,["onClick"]))])),default:(0,n.w5)((()=>[(0,n.Wm)(A,null,{title:(0,n.w5)((()=>[(0,n._)("div",j,(0,c.zw)(e.userNickName),1)])),description:(0,n.w5)((()=>[(0,n._)("div",U,(0,c.zw)(e.createTime),1)])),avatar:(0,n.w5)((()=>[(0,n.Wm)(p,{size:60,src:e.userAvatar},null,8,["src"])])),_:2},1024),(0,n._)("div",H,[(0,n.Wm)(T,{ellipsis:!!M.value&&{rows:5,expandable:!0},style:{lineHeight:"25px",fontSize:"16px"},content:e.content},{ellipsisSymbol:(0,n.w5)((()=>[S])),_:2},1032,["ellipsis","content"])]),(0,n.Wm)(V,{src:e.imageUrl},null,8,["src"])])),_:2},1024)))),128))])],64)}}},Z=a(89);const W=(0,Z.Z)(P,[["__scopeId","data-v-0983a7c6"]]);var C=W}}]);
//# sourceMappingURL=54.5fd16e09.js.map