{"version":3,"file":"js/618.576c72bc.js","mappings":"6RAiCA,MAAMA,GAAWC,EAAAA,EAAAA,IAAI,IAKfC,IAJWD,EAAAA,EAAAA,IAAI,CACnBE,UAAW,KAGe,SAAUC,EAAKC,GACxB,OAAbD,EAAIE,MACNC,EAAAA,EAAAA,IAAU,CACRC,KAAM,UACNC,QAAS,UAGXF,EAAAA,EAAAA,IAAU,CACRC,KAAM,UACNC,QAASL,EAAIM,KAInB,GAGMC,EAAcA,MAClBJ,EAAAA,EAAAA,IAAU,CACRC,KAAM,QACNC,QAAS,QACT,EAEEG,GAAQX,EAAAA,EAAAA,IAAI,IAEZY,EAAqB,SAAUC,GAEnC,OADAF,EAAMG,OAAQC,EAAAA,EAAAA,IAAoB,SACb,eAAjBF,EAAQN,MAA0C,cAAjBM,EAAQN,MAC3CD,EAAAA,GAAUU,MAAM,uCACT,KACEH,EAAQI,KAAO,KAAO,KAAO,MACtCX,EAAAA,GAAUU,MAAM,6CACT,EAGX,EAEME,GAAYlB,EAAAA,EAAAA,MACZmB,EAAeA,KACnBD,EAAUJ,MAAMM,QAAQ,EAGpBC,EAAYA,CAACC,EAAMC,KACvBxB,EAASe,MAAQU,IAAIC,gBAAgBH,EAAKI,IAAI,E,muBC1EhD,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://simida-web/./src/views/upload/index.vue","webpack://simida-web/./src/views/upload/index.vue?f38d"],"sourcesContent":["<template>\r\n  <el-upload\r\n      ref=\"uploadRef\"\r\n      class=\"avatar-uploader\"\r\n      action=\"/upload\"\r\n      :data=\"{'operationCode': 1}\"\r\n      :headers=\"{ 'Authorization': token }\"\r\n      :show-file-list=\"false\"\r\n      :on-success=\"handleAvatarSuccess\"\r\n      :before-upload=\"beforeAvatarUpload\"\r\n      :on-error=\"uploadError\"\r\n      :auto-upload=\"false\"\r\n      :on-change=\"imgChange\"\r\n  >\r\n    <img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\"/>\r\n    <el-icon v-else class=\"avatar-uploader-icon\">\r\n      <Plus/>\r\n    </el-icon>\r\n  </el-upload>\r\n\r\n  <el-button class=\"ml-3\" type=\"success\" @click=\"submitUpload\">\r\n    upload to server\r\n  </el-button>\r\n\r\n\r\n</template>\r\n\r\n<script setup>\r\nimport {ref} from 'vue';\r\nimport {ElMessage} from 'element-plus';\r\nimport {Plus} from '@element-plus/icons-vue';\r\nimport {getLocalStorageItem} from \"@/utils/data\";\r\n\r\nconst imageUrl = ref('');\r\nconst userInfo = ref({\r\n  headerImg: '',\r\n})\r\n\r\nconst handleAvatarSuccess = function (res, upload) {\r\n  if (res.code === 1001) {\r\n    ElMessage({\r\n      type: 'success',\r\n      message: '上传成功'\r\n    })\r\n  } else {\r\n    ElMessage({\r\n      type: 'warning',\r\n      message: res.msg\r\n    })\r\n  }\r\n\r\n};\r\n\r\n\r\nconst uploadError = () => {\r\n  ElMessage({\r\n    type: 'error',\r\n    message: '上传失败'\r\n  })\r\n}\r\nconst token = ref(\"\")\r\n\r\nconst beforeAvatarUpload = function (rawFile) {\r\n  token.value = getLocalStorageItem(\"token\")\r\n  if (rawFile.type !== 'image/jpeg' && rawFile.type !== 'image/png') {\r\n    ElMessage.error('Avatar picture must be JPG format!');\r\n    return false;\r\n  } else if (rawFile.size / 1024 / 1024 > 10) {\r\n    ElMessage.error('Avatar picture size can not exceed 10MB!');\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\nconst uploadRef = ref();\r\nconst submitUpload = () => {\r\n  uploadRef.value.submit();\r\n};\r\n\r\nconst imgChange = (file, fileList) => {\r\n  imageUrl.value = URL.createObjectURL(file.raw)\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.content {\r\n  border: 1px rgba(128, 128, 128, 0.32) solid;\r\n  width: 200px;\r\n  height: 200px;\r\n  background-color: red;\r\n  //margin-top: 320px;\r\n  //min-width: 900px;\r\n  //min-height: 90vh;\r\n}\r\n\r\n.p-banner{\r\n//border:$greyBorder;\r\n  min-width: 1176px;\r\n  width:100%;\r\n  height:240px;\r\n  margin-top:80px;\r\n}\r\n\r\n\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed var(--el-border-color);\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n  transition: var(--el-transition-duration-fast);\r\n}\r\n\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: var(--el-color-primary);\r\n}\r\n\r\n.el-icon.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 178px;\r\n  height: 178px;\r\n  text-align: center;\r\n}\r\n</style>","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=dec97894&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-dec97894\"]])\n\nexport default __exports__"],"names":["imageUrl","ref","handleAvatarSuccess","headerImg","res","upload","code","ElMessage","type","message","msg","uploadError","token","beforeAvatarUpload","rawFile","value","getLocalStorageItem","error","size","uploadRef","submitUpload","submit","imgChange","file","fileList","URL","createObjectURL","raw","__exports__"],"sourceRoot":""}