"use strict";(self["webpackChunksimida_web"]=self["webpackChunksimida_web"]||[]).push([[924],{6394:function(e,t,a){a.d(t,{Z:function(){return u}});var l=a(3396),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M573 421c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40zm-280 0c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40z"}},{tag:"path",attrs:{d:"M894 345a343.92 343.92 0 00-189-130v.1c-17.1-19-36.4-36.5-58-52.1-163.7-119-393.5-82.7-513 81-96.3 133-92.2 311.9 6 439l.8 132.6c0 3.2.5 6.4 1.5 9.4a31.95 31.95 0 0040.1 20.9L309 806c33.5 11.9 68.1 18.7 102.5 20.6l-.5.4c89.1 64.9 205.9 84.4 313 49l127.1 41.4c3.2 1 6.5 1.6 9.9 1.6 17.7 0 32-14.3 32-32V753c88.1-119.6 90.4-284.9 1-408zM323 735l-12-5-99 31-1-104-8-9c-84.6-103.2-90.2-251.9-11-361 96.4-132.2 281.2-161.4 413-66 132.2 96.1 161.5 280.6 66 412-80.1 109.9-223.5 150.5-348 102zm505-17l-8 10 1 104-98-33-12 5c-56 20.8-115.7 22.5-171 7l-.2-.1A367.31 367.31 0 00729 676c76.4-105.3 88.8-237.6 44.4-350.4l.6.4c23 16.5 44.1 37.1 62 62 72.6 99.6 68.5 235.2-8 330z"}},{tag:"path",attrs:{d:"M433 421c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40z"}}]},name:"comment",theme:"outlined"},s=n,i=a(8144);function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},l=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),l.forEach((function(t){r(e,t,a[t])}))}return e}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var c=function(e,t){var a=o({},e,t.attrs);return(0,l.Wm)(i.Z,o({},a,{icon:s}),null)};c.displayName="CommentOutlined",c.inheritAttrs=!1;var u=c},9069:function(e,t,a){a.d(t,{Z:function(){return u}});var l=a(3396),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.9 533.7c16.8-22.2 26.1-49.4 26.1-77.7 0-44.9-25.1-87.4-65.5-111.1a67.67 67.67 0 00-34.3-9.3H572.4l6-122.9c1.4-29.7-9.1-57.9-29.5-79.4A106.62 106.62 0 00471 99.9c-52 0-98 35-111.8 85.1l-85.9 311H144c-17.7 0-32 14.3-32 32v364c0 17.7 14.3 32 32 32h601.3c9.2 0 18.2-1.8 26.5-5.4 47.6-20.3 78.3-66.8 78.3-118.4 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7-.2-12.6-2-25.1-5.6-37.1zM184 852V568h81v284h-81zm636.4-353l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 16.5-7.2 32.2-19.6 43l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 16.5-7.2 32.2-19.6 43l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 22.4-13.2 42.6-33.6 51.8H329V564.8l99.5-360.5a44.1 44.1 0 0142.2-32.3c7.6 0 15.1 2.2 21.1 6.7 9.9 7.4 15.2 18.6 14.6 30.5l-9.6 198.4h314.4C829 418.5 840 436.9 840 456c0 16.5-7.2 32.1-19.6 43z"}}]},name:"like",theme:"outlined"},s=n,i=a(8144);function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},l=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),l.forEach((function(t){r(e,t,a[t])}))}return e}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var c=function(e,t){var a=o({},e,t.attrs);return(0,l.Wm)(i.Z,o({},a,{icon:s}),null)};c.displayName="LikeOutlined",c.inheritAttrs=!1;var u=c},7439:function(e,t,a){a.d(t,{Z:function(){return u}});var l=a(3396),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M752 664c-28.5 0-54.8 10-75.4 26.7L469.4 540.8a160.68 160.68 0 000-57.6l207.2-149.9C697.2 350 723.5 360 752 360c66.2 0 120-53.8 120-120s-53.8-120-120-120-120 53.8-120 120c0 11.6 1.6 22.7 4.7 33.3L439.9 415.8C410.7 377.1 364.3 352 312 352c-88.4 0-160 71.6-160 160s71.6 160 160 160c52.3 0 98.7-25.1 127.9-63.8l196.8 142.5c-3.1 10.6-4.7 21.8-4.7 33.3 0 66.2 53.8 120 120 120s120-53.8 120-120-53.8-120-120-120zm0-476c28.7 0 52 23.3 52 52s-23.3 52-52 52-52-23.3-52-52 23.3-52 52-52zM312 600c-48.5 0-88-39.5-88-88s39.5-88 88-88 88 39.5 88 88-39.5 88-88 88zm440 236c-28.7 0-52-23.3-52-52s23.3-52 52-52 52 23.3 52 52-23.3 52-52 52z"}}]},name:"share-alt",theme:"outlined"},s=n,i=a(8144);function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},l=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),l.forEach((function(t){r(e,t,a[t])}))}return e}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var c=function(e,t){var a=o({},e,t.attrs);return(0,l.Wm)(i.Z,o({},a,{icon:s}),null)};c.displayName="ShareAltOutlined",c.inheritAttrs=!1;var u=c},3924:function(e,t,a){a.r(t),a.d(t,{default:function(){return R}});a(560),a(8858),a(1318),a(3228);var l=a(3396),n=a(4870),s=a(9242),i=a(7139),o=a(4054),r=a(1192),c=a(7439),u=a(6394),d=a(9069),p=a(4471),m=a(7625),f=a(7178),v=a(5878),g=a(2748),w=a(4476),y=a(1120),b=a(6482);const h=e=>((0,l.dD)("data-v-4fdbb8fe"),e=e(),(0,l.Cn)(),e),k={key:0,class:"post-msg"},_={class:"pic-box"},z=["src"],W={class:"overlay"},O=["infinite-scroll-disabled"],U=["onClick"],I={class:"post-createtime"},S={class:"post-content"},j=h((()=>(0,l._)("span",{style:{color:"#de1c31"}},"展开",-1))),C=h((()=>(0,l._)("div",{class:"post-nickname"},"加载动态",-1))),H=h((()=>(0,l._)("div",{class:"post-createtime"},"加载动态",-1))),x={class:"post-content"},Z=h((()=>(0,l._)("span",{style:{color:"#de1c31"}},"展开",-1))),P=h((()=>(0,l._)("div",{class:"post-nickname"},"加载动态",-1))),A=h((()=>(0,l._)("div",{class:"post-createtime"},"加载动态",-1))),q={class:"post-content"},D=h((()=>(0,l._)("span",{style:{color:"#de1c31"}},"展开",-1))),M=h((()=>(0,l._)("div",{class:"post-nickname"},"加载动态",-1))),F=h((()=>(0,l._)("div",{class:"post-createtime"},"加载动态",-1))),L={class:"post-content"},N=h((()=>(0,l._)("span",{style:{color:"#de1c31"}},"展开",-1)));var T={__name:"recommended",props:{feed:{type:Array,default:[]}},setup(e){const t=(0,n.iH)({search:"请输入关键字",categories:{Activity:"Atividades",Flags:"旗帜",Foods:"食物",Frequently:"Frequentes",Objects:"Objetos",Nature:"Natureza",Peoples:"Pessoas",Symbols:"Símbolos",Places:"Locais"}});function a(e){let t=document.getElementById("feedInput"),a=t.selectionStart,l=t.selectionEnd,n=t.value.substring(0,a)+e.i+t.value.substring(l);t.value=n,t.focus(),t.selectionStart=a+e.n.length,t.selectionEnd=a+e.n.length,G.content=n,X.value=""===G.content}const h=e=>{y.Z.push({path:"/postDetail",query:{feedId:e}})},T=(0,n.iH)(!0),{searchFeed:B}=e;(0,l.bv)((()=>{$()}));const E=(0,n.iH)(!0),R=((0,n.iH)("#000"),e=>{y.Z.push({path:"/userCenter/otherUserCenter",query:{userId:e}})}),G=(0,n.qj)({content:"",imageUrl:""}),V=(0,n.iH)([{comments:[],likedUserIds:[]}]),Y=(0,n.iH)(1),J=(0,n.iH)(10),K=(0,n.iH)(!1),Q=(0,n.iH)(!1),$=()=>{K.value=!0,T.value=!0,p.Z.get("/feed/getFeedByPage/"+Y.value+"/"+J.value).then((e=>{2001===e.data.code?1===Y.value?setTimeout((()=>{V.value=e.data.data,Y.value++,K.value=!1,T.value=!1}),1500):setTimeout((()=>{V.value=V.value.concat(e.data.data),Y.value++,K.value=!1,T.value=!1}),1500):(T.value=!1,setTimeout((()=>{Q.value=!1}),3e3),Q.value=!0,setTimeout((()=>{K.value=!1}),5e3))}))},X=(0,n.iH)(!0),ee=(0,n.iH)(""),te=((0,n.iH)(""),(0,n.iH)(!1),async function(e,t){1001===e.code?((0,f.z8)({type:"success",message:"上传成功"}),G.imageUrl=e.data.filePath,de()):(0,f.z8)({type:"warning",message:e.msg})}),ae=()=>{(0,f.z8)({type:"error",message:"上传失败"})},le=(0,n.iH)(""),ne=function(e){return le.value=(0,v.le)("token"),"image/jpeg"!==e.type&&"image/png"!==e.type&&"image/gif"!==e.type?(f.z8.error("头像只允许JPG、PNG或GIF格式!"),!1):!(e.size/1024/1024>10)||(f.z8.error("上传的头像文件大小不能 10MB!"),!1)},se=(0,n.iH)();function ie(){return new Promise(((e,t)=>{se.value.submit(),e()}))}function oe(){se.value.$el.querySelector("input").click()}function re(){ee.value="",se.value.clearFiles()}const ce=(e,t)=>{ee.value=URL.createObjectURL(e.raw)},ue=()=>{ee.value?ie():de()},de=()=>{p.Z.post("/feed",G).then((e=>{if(3001===e.data.code){fe("success",e.data.msg),G.content="",G.imageUrl="",re();let t=[e.data.data];V.value=t.concat(V.value)}else fe("error",e.data.msg)}))},pe=e=>{p.Z.post("/like",{feedId:e.feedId,feedUserId:e.userId},{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((t=>{3001===t.data.code?(fe("success",t.data.msg),e.likedUserIds.push(m.h.userInfo.userId)):fe("error",t.data.msg)}))},me=e=>{p.Z.delete("/like",{headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{feedId:e.feedId,feedUserId:e.userId}}).then((t=>{5001===t.data.code?(fe("success",t.data.msg),e.likedUserIds.splice(e.likedUserIds.indexOf(m.h.userInfo.userId),1)):fe("error",t.data.msg)}))},fe=(e,t,a)=>{w.Z[e]({message:t,description:a,duration:2})};return(e,p)=>{const f=(0,l.up)("a-textarea"),v=(0,l.up)("el-upload"),w=(0,l.up)("el-icon"),y=(0,l.up)("a-button"),B=(0,l.up)("a-popover"),Y=(0,l.up)("a-avatar"),J=(0,l.up)("a-card-meta"),ie=(0,l.up)("a-typography-paragraph"),de=(0,l.up)("a-image"),fe=(0,l.up)("a-card"),ve=(0,l.Q2)("infinite-scroll");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,n.SU)(m.h).isLogin?((0,l.wg)(),(0,l.iD)("div",k,[(0,l.Wm)(f,{class:"postMsg",value:G.content,"onUpdate:value":p[0]||(p[0]=e=>G.content=e),placeholder:"有什么想要分享给大家？","auto-size":{minRows:2,maxRows:5},onInput:p[1]||(p[1]=e=>X.value=""===G.content),id:"feedInput"},null,8,["value"]),(0,l.Wm)(v,{ref_key:"uploadRef",ref:se,action:"/upload",data:{operationCode:2},headers:{Authorization:le.value},"show-file-list":!1,"on-success":te,"before-upload":ne,"on-error":ae,"auto-upload":!1,"on-change":ce},null,8,["headers"]),(0,l._)("div",_,[(0,l._)("img",{src:ee.value,alt:""},null,8,z),(0,l._)("div",W,[(0,l.Wm)(w,{onClick:re,style:{cursor:"pointer"}},{default:(0,l.w5)((()=>[(0,l.Wm)((0,n.SU)(g.Delete))])),_:1})])]),(0,l._)("div",null,[(0,l.Wm)(y,{class:"picture-btn",onClick:oe},{icon:(0,l.w5)((()=>[(0,l.Wm)((0,n.SU)(o.Z))])),default:(0,l.w5)((()=>[(0,l.Uk)("图片 ")])),_:1}),(0,l.Wm)(B,{trigger:"click",placement:"bottom"},{content:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)((0,n.SU)(b.Z),{native:!0,i18n:t.value,onSelect:a},null,8,["i18n"]),[[s.F8,!0]])])),default:(0,l.w5)((()=>[(0,l.Wm)(y,{class:"face-btn"},{icon:(0,l.w5)((()=>[(0,l.Wm)((0,n.SU)(r.Z))])),default:(0,l.w5)((()=>[(0,l.Uk)("表情 ")])),_:1})])),_:1}),(0,l.Wm)(y,{class:"post-btn",shape:"round",disabled:X.value,onClick:ue},{default:(0,l.w5)((()=>[(0,l.Uk)("发布")])),_:1},8,["disabled"])])])):(0,l.kq)("",!0),(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",{"infinite-scroll-disabled":K.value,"infinite-scroll-immediate":!1},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(V.value,((e,t)=>((0,l.wg)(),(0,l.j4)(fe,{key:t,class:"post",size:"default"},{actions:(0,l.w5)((()=>[(0,l.Wm)(y,null,{icon:(0,l.w5)((()=>[(0,l.Wm)((0,n.SU)(c.Z),{key:"forward"})])),_:1}),(0,l.Wm)(y,{onClick:t=>h(e.feedId)},{icon:(0,l.w5)((()=>[(0,l.Wm)((0,n.SU)(u.Z),{key:"comment"})])),default:(0,l.w5)((()=>[(0,l.Uk)(" "+(0,i.zw)(e.comments.length),1)])),_:2},1032,["onClick"]),e.likedUserIds.includes((0,n.SU)(m.h).userInfo.userId)?((0,l.wg)(),(0,l.j4)(y,{key:0,onClick:t=>me(e)},{icon:(0,l.w5)((()=>[(0,l.Wm)((0,n.SU)(d.Z),{style:{color:"#de1c31"},key:"like"})])),default:(0,l.w5)((()=>[(0,l.Uk)(" "+(0,i.zw)(e.likedUserIds.length),1)])),_:2},1032,["onClick"])):((0,l.wg)(),(0,l.j4)(y,{key:1,onClick:t=>pe(e)},{icon:(0,l.w5)((()=>[(0,l.Wm)((0,n.SU)(d.Z),{key:"like"})])),default:(0,l.w5)((()=>[(0,l.Uk)(" "+(0,i.zw)(e.likedUserIds.length),1)])),_:2},1032,["onClick"]))])),default:(0,l.w5)((()=>[(0,l.Wm)(J,null,{title:(0,l.w5)((()=>[(0,l._)("div",{class:"post-nickname",onClick:t=>R(e.userId),style:{cursor:"pointer"}},(0,i.zw)(e.userNickName),9,U)])),description:(0,l.w5)((()=>[(0,l._)("div",I,(0,i.zw)(e.createTime),1)])),avatar:(0,l.w5)((()=>[(0,l.Wm)(Y,{size:60,src:e.userAvatar,onClick:t=>R(e.userId),style:{cursor:"pointer"}},null,8,["src","onClick"])])),_:2},1024),(0,l._)("div",S,[(0,l.Wm)(ie,{ellipsis:!!E.value&&{rows:5,expandable:!0},style:{lineHeight:"25px",fontSize:"16px"},content:e.content},{ellipsisSymbol:(0,l.w5)((()=>[j])),_:2},1032,["ellipsis","content"])]),(0,l.Wm)(de,{src:e.imageUrl,lazy:!0},null,8,["src"])])),_:2},1024)))),128))],8,O)),[[ve,$]]),T.value?((0,l.wg)(),(0,l.j4)(fe,{key:1,loading:T.value,class:"post",size:"default"},{default:(0,l.w5)((()=>[(0,l.Wm)(J,null,{title:(0,l.w5)((()=>[C])),description:(0,l.w5)((()=>[H])),avatar:(0,l.w5)((()=>[(0,l.Wm)(Y,{size:60})])),_:1}),(0,l._)("div",x,[(0,l.Wm)(ie,{ellipsis:!!E.value&&{rows:5,expandable:!0},style:{lineHeight:"25px",fontSize:"16px"},content:"加载动态"},{ellipsisSymbol:(0,l.w5)((()=>[Z])),_:1},8,["ellipsis"])]),(0,l.Wm)(de)])),_:1},8,["loading"])):(0,l.kq)("",!0),T.value?((0,l.wg)(),(0,l.j4)(fe,{key:2,loading:T.value,class:"post",size:"default"},{default:(0,l.w5)((()=>[(0,l.Wm)(J,null,{title:(0,l.w5)((()=>[P])),description:(0,l.w5)((()=>[A])),avatar:(0,l.w5)((()=>[(0,l.Wm)(Y,{size:60})])),_:1}),(0,l._)("div",q,[(0,l.Wm)(ie,{ellipsis:!!E.value&&{rows:5,expandable:!0},style:{lineHeight:"25px",fontSize:"16px"},content:"加载动态"},{ellipsisSymbol:(0,l.w5)((()=>[D])),_:1},8,["ellipsis"])]),(0,l.Wm)(de)])),_:1},8,["loading"])):(0,l.kq)("",!0),T.value?((0,l.wg)(),(0,l.j4)(fe,{key:3,loading:T.value,class:"post",size:"default"},{default:(0,l.w5)((()=>[(0,l.Wm)(J,null,{title:(0,l.w5)((()=>[M])),description:(0,l.w5)((()=>[F])),avatar:(0,l.w5)((()=>[(0,l.Wm)(Y,{size:60})])),_:1}),(0,l._)("div",L,[(0,l.Wm)(ie,{ellipsis:!!E.value&&{rows:5,expandable:!0},style:{lineHeight:"25px",fontSize:"16px"},content:"加载动态"},{ellipsisSymbol:(0,l.w5)((()=>[N])),_:1},8,["ellipsis"])]),(0,l.Wm)(de)])),_:1},8,["loading"])):(0,l.kq)("",!0),(0,l._)("div",{class:(0,i.C_)(Q.value?"no-more-ture":"no-more-false")},"没有更多了",2)],64)}}},B=a(89);const E=(0,B.Z)(T,[["__scopeId","data-v-4fdbb8fe"]]);var R=E}}]);
//# sourceMappingURL=924.027d022f.js.map