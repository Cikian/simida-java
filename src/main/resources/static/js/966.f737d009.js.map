{"version":3,"file":"js/966.f737d009.js","mappings":"uYAQA,MAAMA,GAAgBC,EAAAA,EAAAA,KAAI,IAE1BC,EAAAA,EAAAA,KAAU,KACNC,GAAiB,IAKrB,MAAMC,EAAYC,IAChBC,EAAAA,EAAeC,OAAO,UAClB,CACEC,QAAS,CAAC,eAAgB,qCAC1BC,KAAM,CAACJ,YAAaA,KAExBK,MAAMC,IACgB,OAAlBA,EAAIF,KAAKG,MACXN,EAAAA,EAAeO,IAAI,UAAUH,MAAMI,IACR,OAArBA,EAAOL,KAAKG,QACdG,EAAAA,EAAAA,IAAoB,WAAYD,EAAOL,KAAKA,KAAM,GAClDO,EAAAA,EAAMC,SAAWH,EAAOL,KAAKA,KAAKQ,SAClCD,EAAAA,EAAME,UAAYJ,EAAOL,KAAKA,KAAKS,UACnCF,EAAAA,EAAMG,WAAaL,EAAOL,KAAKA,KAAKU,WACpCH,EAAAA,EAAMI,SAAU,EAClB,GAGJ,GACA,EAGEC,EAAaA,CAACC,EAAOC,KACM,SAA3BD,EAAME,OAAOC,UACfH,EAAME,OAAOC,UAAYF,EAEzBD,EAAME,OAAOC,UAAY,MAC3B,EAIIC,EAAgBC,IACpBC,EAAAA,EAAOC,KAAK,CAACC,KAAM,8BAA+BC,MAAO,CAACJ,OAAQA,IAAS,EAGvEK,GAAiB/B,EAAAA,EAAAA,IAAI,GACrBgC,GAAkBhC,EAAAA,EAAAA,IAAI,GAEtBE,EAAkBA,KACtB6B,EAAeE,MAAQlB,EAAAA,EAAME,UAAUiB,OACvCF,EAAgBC,MAAQlB,EAAAA,EAAMG,WAAWgB,MAAM,E,47CClDjD,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://simida-web/./src/views/socialFeedModel/home/pages/userCenter/followings.vue","webpack://simida-web/./src/views/socialFeedModel/home/pages/userCenter/followings.vue?2197"],"sourcesContent":["<script setup>\r\n\r\nimport {store} from \"@/store\";\r\nimport {onMounted, ref} from \"vue\";\r\nimport requestService from \"@/utils/request\";\r\nimport {setLocalStorageItem} from \"@/utils/data\";\r\nimport router from \"@/router\";\r\n\r\nconst loadingFollow = ref(false)\r\n\r\nonMounted(() => {\r\n    getFollowsCount();\r\n    // getFeed();\r\n})\r\n\r\n// 取消关注，接收参数为被关注者的id\r\nconst unFollow = (followingId) => {\r\n  requestService.delete(\"/follow\",\r\n      {\r\n        headers: {\"Content-Type\": \"application/x-www-form-urlencoded\"},\r\n        data: {followingId: followingId}\r\n      }\r\n  ).then((res) => {\r\n    if (res.data.code === 5001) {\r\n      requestService.get('/user/').then((result) => {\r\n        if (result.data.code === 2001) {\r\n          setLocalStorageItem(\"userInfo\", result.data.data, 5)\r\n          store.userInfo = result.data.data.userInfo\r\n          store.followers = result.data.data.followers\r\n          store.followings = result.data.data.followings\r\n          store.isLogin = true\r\n        }\r\n      })\r\n\r\n    }\r\n  })\r\n}\r\n\r\nconst changeText = (event, text) => {\r\n  if (event.target.innerText === '取消关注') {\r\n    event.target.innerText = text\r\n  } else {\r\n    event.target.innerText = '取消关注'\r\n  }\r\n}\r\n\r\n\r\nconst toUserCenter = (userId) => {\r\n  router.push({path: '/userCenter/otherUserCenter', query: {userId: userId}})\r\n}\r\n\r\nconst followersCount = ref(0);\r\nconst followingsCount = ref(0);\r\n\r\nconst getFollowsCount = () => {\r\n  followersCount.value = store.followers.length;\r\n  followingsCount.value = store.followings.length;\r\n}\r\n\r\n</script>\r\n\r\n<template>\r\n  <div :style=\"{width:'600px',height:'fit-content'}\">\r\n    <div :style=\"{margin:'5px 0',letterSpacing:'1px'}\">全部关注({{ followingsCount }})</div>\r\n\r\n    <div>\r\n      <a-card :loading=\"loadingFollow\" class=\"follow-list\" v-for=\"(item,index) in store.followings\" :key=\"index\"\r\n      >\r\n        <a-card-meta>\r\n          <template #title>\r\n            <div class=\"nickname\" @click=\"toUserCenter(item.following)\" style=\"cursor: pointer\" >{{ item.followingName }}</div>\r\n          </template>\r\n          <template #avatar>\r\n            <a-avatar class=\"avatar\" shape=\"circle\" :src=\"item.followingAvatar\" :size=\"60\"\r\n                      @click=\"toUserCenter(item.following)\"\r\n                      style=\"cursor: pointer\"\r\n            />\r\n          </template>\r\n          <template #description>\r\n            <a-typography-text class=\"desc\" :style=\"{fontSize:'13px',color:' #c2c2c2'}\"\r\n                               :content=\"item.followingDesc\"/>\r\n          </template>\r\n        </a-card-meta>\r\n        <a-button @mouseover=\"changeText($event)\" @mouseout=\"changeText($event,'互相关注')\"\r\n                  @click=\"unFollow(item.following)\" class=\"follow-btn\" shape=\"round\"\r\n                  v-if=\"store.followers.some(follower => follower.follower === item.following)\">互相关注\r\n        </a-button>\r\n        <a-button @mouseover=\"changeText($event)\" @mouseout=\"changeText($event,'已关注')\"\r\n                  @click=\"unFollow(item.following)\" class=\"follow-btn\" shape=\"round\" v-else>已关注\r\n        </a-button>\r\n      </a-card>\r\n\r\n\r\n    </div>\r\n\r\n\r\n  </div>\r\n\r\n</template>\r\n\r\n<style scoped>\r\n.avatar {\r\n\r\n}\r\n\r\n.nickname {\r\n  margin-top: 5px;\r\n}\r\n\r\n.desc {\r\n  margin-top: 8px;\r\n}\r\n\r\n.follow-btn {\r\n  width: 90px;\r\n  position: absolute;\r\n  box-shadow: none;\r\n  margin-top: -40px;\r\n  margin-left: 460px;\r\n}\r\n\r\n.follow-btn:hover {\r\n  box-shadow: none;\r\n  color: #de1c31;\r\n  border: 1px #de1c31 solid;\r\n}\r\n\r\n.follow-list {\r\n  margin-bottom: 10px;\r\n  width: 630px;\r\n  display: flex;\r\n  padding: 18px 15px;\r\n}\r\n\r\n.follow-list:hover {\r\n\r\n}\r\n</style>","import script from \"./followings.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./followings.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./followings.vue?vue&type=style&index=0&id=761f321b&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-761f321b\"]])\n\nexport default __exports__"],"names":["loadingFollow","ref","onMounted","getFollowsCount","unFollow","followingId","requestService","delete","headers","data","then","res","code","get","result","setLocalStorageItem","store","userInfo","followers","followings","isLogin","changeText","event","text","target","innerText","toUserCenter","userId","router","push","path","query","followersCount","followingsCount","value","length","__exports__"],"sourceRoot":""}